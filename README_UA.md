# DataSpringCafeteriaProject

## Опис проекту
Проєкт DataSpringCafeteriaProject - це вебдодаток, розроблений з використанням технології Spring Boot, який призначений для керування робітниками та їх ролями у кафетерії.

## Технології
У цьому проєкті були використані наступні технології та бібліотеки:

- **Spring Boot**: Основна технологія для створення серверної частини додатку. Включає наступні стартери:

    - `spring-boot-starter-data-jpa`: Для роботи з JPA та базою даних.
    - `spring-boot-starter-thymeleaf`: Для створення HTML-сторінок та їх відображення.
    - `spring-boot-starter-validation`: Для валідації даних на стороні сервера.
    - `spring-boot-starter-web`: Для розробки веб-додатку.

- **MySQL**: База даних, в якій зберігається інформація про працівників та їх ролі.

- **Hibernate**: ORM-фреймворк для роботи з базою даних.

## Налаштування з'єднання з базою даних
Для налаштування з'єднання з базою даних використовується файл `application.yml`, де вказані наступні параметри:

```yaml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/cafeteriadb
    username: root
    password: yourpassword
  jpa:
    hibernate:
      ddl-auto: create
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        
```

## Функціональність
### Проект DataSpringCafeteriaProject надає такі можливості:
***Отримання списку працівників:*** Можливість перегляду списку всіх працівників у кафетерії.

***Отримання списку ролей:*** Можливість перегляду списку усіх доступних ролей.

***Перегляд деталей працівника:*** Можливість перегляду деталей конкретного працівника, включаючи ім'я, прізвище, вік, роль.

***Додавання нового працівника:*** Можливість додавання нового працівника з вказанням усіх необхідних даних.

***Редагування працівника:*** Можливість редагування інформації про існуючого працівника, включаючи ім'я, прізвище, вік, роль.

***Видалення працівника:*** Можливість видалення працівника з системи.

***Пошук працівника за ім'ям або прізвищем:*** Можливість здійснювати пошук працівника за ім'ям, прізвищем або їх комбінацією.

## Структура проєкту
### Основні компоненти проєкту включають:
***models:*** Пакет, де знаходяться моделі даних, такі як Worker та Role.

***repository:*** Пакет, де розташовані репозиторії для роботи з базою даних, такі як WorkerRepository та RoleRepository.

У репозиторії `WorkerRepository` створений метод, який дозволяє виконати пошук працівників за ім'ям або прізвищем.
```java

@Query("SELECT w FROM Worker w WHERE lower(w.firstName) LIKE lower(concat('%', :query, '%')) OR lower(w.lastName) LIKE lower(concat('%', :query, '%'))")
List<Worker> searchByNameOrLastName(@Param("query") String query);
```
Даний метод використовує анотацію @Query, яка дозволяє вам визначити власний запит SQL для виконання. Метод використовує власний запит SQL для пошуку працівників за ім'ям або прізвищем. 
Він приймає параметр query, який представляє рядок для пошуку, і повертає список працівників, чиї імена або прізвища містять частину цього рядка (ігноруючи регістр). Це дозволяє користувачам здійснювати пошук за частиною імені або прізвища працівника.

У репозиторії `WorkerRepository` створений метод, який дозволяє оновлювати інформацію про працівника:
```java
    @Modifying
    @Transactional
    @Query("UPDATE Worker w SET w.firstName = :firstName, w.lastName = :lastName, w.email = :email, w.birthDate = :birthDate, w.role = :role WHERE w.id = :id")
    void updateWorkerInfo(
            @Param("id") Long id,
            @Param("firstName") String firstName,
            @Param("lastName") String lastName,
            @Param("email") String email,
            @Param("birthDate") LocalDate birthDate,
            @Param("role") Role role
    );
```

***service:*** Пакет, де знаходяться сервіси для логіки додатку, такі як CafeteriaService.

***controller:*** Пакет, де розташовані контролери для обробки HTTP-запитів.

## Опис методів
### Опис методів, які реалізовані у класі CafeteriaService:
**getAllWorkers():*** Повертає список всіх працівників.

***getAllRoles():*** Повертає список всіх ролей.

***getWorkerById(Long id):*** Повертає працівника за заданим ідентифікатором.

***saveWorker(Worker worker):*** Зберігає інформацію про працівника.

***saveRole(Role role):*** Зберігає інформацію про роль.

***deleteWorker(Long id):*** Видаляє працівника за заданим ідентифікатором.

***searchByFullName(String fullName):*** Здійснює пошук працівників за ім'ям або прізвищем.

## HTML-сторінки
### Проєкт використовує шаблон Thymeleaf для створення наступних HTML-сторінок:
***workers.html:*** Відображення списку працівників.

***add-worker.html:*** Форма для додавання нового працівника.

***worker-details.html:*** Відображення деталей конкретного працівника.

***edit-worker.html:*** Форма для редагування інформації про працівника.

***search-form.html:*** Форма для пошуку працівника за ім'ям або прізвищем.

***search-results.html:*** Відображення результатів пошуку працівників.

---

#### Проєкт DataSpringCafeteriaProject демонструє, як застосовувати основи Spring Boot для розробки вебдодатків з базовим функціоналом створення, читання, оновлення та видалення даних з використанням бази даних.